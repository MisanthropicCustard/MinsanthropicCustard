"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
// https://facebook.github.io/react/blog/2015/12/16/ismounted-antipattern.html

var makeCancelable = exports.makeCancelable = function makeCancelable(promise) {
  var hasCanceled_ = false;

  var wrappedPromise = new Promise(function (resolve, reject) {
    promise.then(function (val) {
      return hasCanceled_ ? reject({ isCanceled: true }) : resolve(val);
    });
    promise.catch(function (error) {
      return hasCanceled_ ? reject({ isCanceled: true }) : reject(error);
    });
  });

  return {
    promise: wrappedPromise,
    cancel: function cancel() {
      hasCanceled_ = true;
    }
  };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvY2FuY2VsYWJsZVByb21pc2UuanMiXSwibmFtZXMiOlsibWFrZUNhbmNlbGFibGUiLCJwcm9taXNlIiwiaGFzQ2FuY2VsZWRfIiwid3JhcHBlZFByb21pc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInRoZW4iLCJ2YWwiLCJpc0NhbmNlbGVkIiwiY2F0Y2giLCJlcnJvciIsImNhbmNlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7QUFFTyxJQUFNQSwwQ0FBaUIsU0FBakJBLGNBQWlCLENBQUNDLE9BQUQsRUFBYTtBQUN6QyxNQUFJQyxlQUFlLEtBQW5COztBQUVBLE1BQU1DLGlCQUFpQixJQUFJQyxPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQXFCO0FBQ3RETCxZQUFRTSxJQUFSLENBQWEsVUFBQ0MsR0FBRDtBQUFBLGFBQ1hOLGVBQWVJLE9BQU8sRUFBQ0csWUFBWSxJQUFiLEVBQVAsQ0FBZixHQUE0Q0osUUFBUUcsR0FBUixDQURqQztBQUFBLEtBQWI7QUFHQVAsWUFBUVMsS0FBUixDQUFjLFVBQUNDLEtBQUQ7QUFBQSxhQUNaVCxlQUFlSSxPQUFPLEVBQUNHLFlBQVksSUFBYixFQUFQLENBQWYsR0FBNENILE9BQU9LLEtBQVAsQ0FEaEM7QUFBQSxLQUFkO0FBR0QsR0FQc0IsQ0FBdkI7O0FBU0EsU0FBTztBQUNMVixhQUFTRSxjQURKO0FBRUxTLFVBRkssb0JBRUk7QUFDUFYscUJBQWUsSUFBZjtBQUNEO0FBSkksR0FBUDtBQU1ELENBbEJNIiwiZmlsZSI6ImNhbmNlbGFibGVQcm9taXNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvYmxvZy8yMDE1LzEyLzE2L2lzbW91bnRlZC1hbnRpcGF0dGVybi5odG1sXG5cbmV4cG9ydCBjb25zdCBtYWtlQ2FuY2VsYWJsZSA9IChwcm9taXNlKSA9PiB7XG4gIGxldCBoYXNDYW5jZWxlZF8gPSBmYWxzZTtcblxuICBjb25zdCB3cmFwcGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBwcm9taXNlLnRoZW4oKHZhbCkgPT5cbiAgICAgIGhhc0NhbmNlbGVkXyA/IHJlamVjdCh7aXNDYW5jZWxlZDogdHJ1ZX0pIDogcmVzb2x2ZSh2YWwpXG4gICAgKTtcbiAgICBwcm9taXNlLmNhdGNoKChlcnJvcikgPT5cbiAgICAgIGhhc0NhbmNlbGVkXyA/IHJlamVjdCh7aXNDYW5jZWxlZDogdHJ1ZX0pIDogcmVqZWN0KGVycm9yKVxuICAgICk7XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgcHJvbWlzZTogd3JhcHBlZFByb21pc2UsXG4gICAgY2FuY2VsKCkge1xuICAgICAgaGFzQ2FuY2VsZWRfID0gdHJ1ZTtcbiAgICB9LFxuICB9O1xufTsiXX0=